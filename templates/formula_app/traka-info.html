{% extends "base.html" %}
{% load static %}
{% load formatter %}

{% block links %}
<link rel="stylesheet" type="text/css" href="{% static 'formula_app/css/traka-info.css' %}?{% now 'U' %}">
{% endblock links %}

{% block content %}
<div class="content">
    <div class="line-info">
        <h1>Formula One {{ traka.ime }}</h1>
        <h2> {{traka.drzava }}</h2>
    </div>
    <h1><span>Тркачка патека:</span> {{ traka.staza }}</h1>
    <img class="staza" src="{% static traka.staza_slika %}">

    <div class="info-wrapper">
        <!-- <div class="tekst-info">Lorem ipsum dolor sit amet consectetur adipisicing elit. Quam quasi voluptatem quaerat
            vero dolorem totam. Numquam perferendis quaerat ea odio optio omnis corrupti, cupiditate est ut. Deleniti
            atque quod sed.</div> -->
        <div class="sesii-info">
            {% for sesija in traka.sesii.all|dictsort:"datum" %}
            <div class="sesija">
                <span>{{ sesija.ime|prevedi }} </span> <span>{{sesija.datum|date:'H:i' }} {{sesija.datum|date:'D'|prevedi }}</span>
            </div>
            {% endfor %}
        </div>

        <div class="gumi-wrapper">
            <h2>На располагање</h2>
            <div class="gumi">
                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/d/df/F1_tire_Pirelli_PZero_Red.svg/512px-F1_tire_Pirelli_PZero_Red.svg.png" alt="Red">
                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/4d/F1_tire_Pirelli_PZero_Yellow.svg/512px-F1_tire_Pirelli_PZero_Yellow.svg.png" alt="Yellow">
                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/d/d6/F1_tire_Pirelli_PZero_White.svg/512px-F1_tire_Pirelli_PZero_White.svg.png" alt="White">
                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/86/F1_tire_Pirelli_Cinturato_Green.svg/512px-F1_tire_Pirelli_PZero_Green.svg.png" alt="Green">
                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/6/63/F1_tire_Pirelli_Cinturato_Blue.svg/512px-F1_tire_Pirelli_PZero_Blue.svg.png" alt="Blue">
            </div>
        </div>
    </div>

    <!-- <div class="staza-info">
        <div class="inf" data-vreme="{{ traka.sesii.all.0.datum }}">
            <p style="font-weight:100; color:gray;">Вежбање 1: </p>
        </div>
        <div class="inf" data-vreme="{{ traka.sessions.1.date }}">
            <p style="font-weight:100; color:gray;">Вежбање 2: </p>
        </div>
        <div class="inf" data-vreme="{{ traka.sessions.2.date }}">
            <p style="font-weight:100; color:gray;">Вежбање 3: </p>
        </div>
        <div class="inf" data-vreme="{{ traka.sessions.3.date }}">
            <p style="font-weight:100; color:gray;">Квалификации: </p>
        </div>
        <div class="inf" data-vreme="{{ traka.sessions.7.date }}">
            <p style="font-weight:100; color:gray;">Трка: </p>
        </div>
    </div> -->
</div>

<script>
    // TODO
    // staj go u poseben JS file ovoa (ne zabravaj toa "static" ke treba da se linknuva)
    var options = { weekday: 'long', year: 'numeric', month: '2-digit', day: '2-digit', hour: "2-digit", minute: "2-digit" };
    document.querySelectorAll(".inf").forEach(element => {
        var vreme = new Date(element.dataset.vreme).toLocaleDateString("en-UK", options).replace("/", ".").replace("/", ".");
        var data = vreme.split(",");
        var den = data[0];
        data.shift()

        switch (den) {
            case "Monday":
                den = "Понеделник";
                break;
            case "Tuesday":
                den = "Вторник";
                break;
            case "Wednesday":
                den = "Среда";
                break;
            case "Thursday":
                den = "Четвтрок";
                break;
            case "Friday":
                den = "Петок";
                break;
            case "Saturday":
                den = "Сабота";
                break;
            default:
                den = "Недела";
                break;
        }

        console.log()

        element.innerHTML += den + data + "ч";
    });
</script>
{% endblock content %}